<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Minimal Timer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050509;
      --card-bg: #0e0e16;
      --accent: #ffffff;
      --accent-soft: #3a3a4a;
      --accent-muted: #8a8aa0;
      --danger: #ff4b4b;
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #141424 0, #050509 60%);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .wrapper {
      width: 100%;
      max-width: 380px;
    }

    .card {
      background: linear-gradient(145deg, #0d0d15, #06060c);
      border-radius: var(--radius);
      padding: 20px 18px 18px;
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.7),
        0 0 0 1px rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.04);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--accent-muted);
    }

    .indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--accent-muted);
    }

    .indicator-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--accent-soft);
      opacity: 0.6;
      transition: opacity 0.15s ease, transform 0.08s ease;
    }

    .indicator-dot.active {
      opacity: 1;
      transform: scale(1.35);
    }

    .display {
      text-align: center;
      padding: 10px 0 14px;
    }

    .time-label {
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--accent-muted);
      margin-bottom: 4px;
    }

    .time-value {
      font-size: 52px;
      font-weight: 600;
      line-height: 1;
      letter-spacing: 0.12em;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .inputs-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }

    .input-group {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .input-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-muted);
    }

    .time-input {
      width: 100%;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: #090912;
      color: var(--accent);
      font-size: 13px;
      text-align: center;
      outline: none;
    }

    .time-input:focus {
      border-color: var(--accent);
    }

    .footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
      gap: 8px;
    }

    .btn {
      flex: 1;
      border-radius: 999px;
      border: 0;
      padding: 9px 0;
      font-size: 12px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      background: #ffffff;
      color: #050509;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: transform 0.08s ease, box-shadow 0.12s ease, background 0.15s ease,
        color 0.15s ease;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.6);
    }

    .btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
    }

    .btn.stop {
      background: var(--danger);
      color: #050509;
    }

    .btn-secondary {
      flex: 0 0 auto;
      min-width: 90px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      padding: 8px 0;
      background: transparent;
      color: var(--accent-muted);
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      cursor: pointer;
      transition: border-color 0.12s ease, color 0.12s ease, background 0.12s ease;
    }

    .btn-secondary:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(255, 255, 255, 0.02);
    }

    .btn-icon {
      font-size: 13px;
      display: inline-block;
      width: 12px;
      text-align: center;
    }

    .small-note {
      font-size: 10px;
      color: var(--accent-muted);
      text-transform: uppercase;
      letter-spacing: 0.14em;
      white-space: nowrap;
    }

    @media (max-width: 400px) {
      .card {
        padding: 18px 14px 16px;
      }

      .time-value {
        font-size: 46px;
      }

      .btn {
        font-size: 11px;
      }

      .small-note {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="card">
      <div class="header">
        <div class="title">Minimal Timer</div>
        <div class="indicator">
          <div class="indicator-dot" id="status-indicator"></div>
          RUN
        </div>
      </div>

      <div class="display">
        <div class="time-label">Tempo restante</div>
        <div class="time-value" id="time-display">00:00</div>
      </div>

      <div class="controls">
        <div class="inputs-row">
          <div class="input-group">
            <span class="input-label">Minutos</span>
            <input
              class="time-input"
              id="minutes-input"
              type="number"
              min="0"
              max="999"
              value="5"
            />
          </div>
          <div class="input-group">
            <span class="input-label">Segundos</span>
            <input
              class="time-input"
              id="seconds-input"
              type="number"
              min="0"
              max="59"
              value="0"
            />
          </div>
        </div>

        <div class="footer-row">
          <button class="btn" id="toggle-btn">
            <span class="btn-icon" id="btn-icon">▶</span>
            <span id="btn-label">Start</span>
          </button>
          <button class="btn-secondary" id="reset-btn">
            Reset
          </button>
        </div>
        <div class="footer-row" style="margin-top:4px;">
          <div class="small-note">Defina o tempo e aperte Start</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const timeDisplay = document.getElementById("time-display");
    const minutesInput = document.getElementById("minutes-input");
    const secondsInput = document.getElementById("seconds-input");
    const toggleBtn = document.getElementById("toggle-btn");
    const resetBtn = document.getElementById("reset-btn");
    const btnLabel = document.getElementById("btn-label");
    const btnIcon = document.getElementById("btn-icon");
    const statusIndicator = document.getElementById("status-indicator");

    let audioCtx = null;
    let isRunning = false;
    let intervalId = null;
    let totalSeconds = 0;
    let remainingSeconds = 0;

    function clampInputs() {
      let mins = parseInt(minutesInput.value, 10);
      let secs = parseInt(secondsInput.value, 10);

      if (isNaN(mins) || mins < 0) mins = 0;
      if (mins > 999) mins = 999;
      if (isNaN(secs) || secs < 0) secs = 0;
      if (secs > 59) secs = 59;

      minutesInput.value = mins;
      secondsInput.value = secs;

      return { mins, secs };
    }

    function computeTotalSeconds() {
      const { mins, secs } = clampInputs();
      totalSeconds = mins * 60 + secs;
      if (totalSeconds < 0) totalSeconds = 0;
      return totalSeconds;
    }

    function formatTime(sec) {
      const minutes = Math.floor(sec / 60);
      const seconds = sec % 60;
      const mm = String(minutes).padStart(2, "0");
      const ss = String(seconds).padStart(2, "0");
      return `${mm}:${ss}`;
    }

    function updateDisplay(sec) {
      timeDisplay.textContent = formatTime(sec);
    }

    function setInitialTime() {
      computeTotalSeconds();
      remainingSeconds = totalSeconds;
      updateDisplay(remainingSeconds);
    }

    function setInputsDisabled(disabled) {
      minutesInput.disabled = disabled;
      secondsInput.disabled = disabled;
      minutesInput.style.opacity = disabled ? 0.5 : 1;
      secondsInput.style.opacity = disabled ? 0.5 : 1;
    }

    function flashIndicator() {
      statusIndicator.classList.add("active");
      setTimeout(() => {
        statusIndicator.classList.remove("active");
      }, 140);
    }

    function beep(times = 3) {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }

      const interval = 0.18;

      for (let i = 0; i < times; i++) {
        const start = audioCtx.currentTime + i * interval;
        const duration = 0.10;

        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();

        osc.type = "square";
        osc.frequency.value = 1500;

        gain.gain.setValueAtTime(0.35, start);
        gain.gain.exponentialRampToValueAtTime(0.001, start + duration);

        osc.connect(gain).connect(audioCtx.destination);
        osc.start(start);
        osc.stop(start + duration);
      }
    }

    function startTimer() {
      if (remainingSeconds <= 0) {
        computeTotalSeconds();
        remainingSeconds = totalSeconds;
      }

      if (remainingSeconds <= 0) return;

      isRunning = true;
      setInputsDisabled(true);
      toggleBtn.classList.add("stop");
      btnLabel.textContent = "Pause";
      btnIcon.textContent = "■";
      flashIndicator();

      if (intervalId) clearInterval(intervalId);

      intervalId = setInterval(() => {
        remainingSeconds -= 1;
        if (remainingSeconds <= 0) {
          remainingSeconds = 0;
          updateDisplay(remainingSeconds);
          stopTimer(false);
          beep();
          flashIndicator();
        } else {
          updateDisplay(remainingSeconds);
          flashIndicator();
        }
      }, 1000);
    }

    function stopTimer(resetState = true) {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
      isRunning = false;
      toggleBtn.classList.remove("stop");
      btnIcon.textContent = "▶";
      btnLabel.textContent = resetState ? "Start" : "Start";
      setInputsDisabled(false);
    }

    function toggleTimer() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        audioCtx.resume().catch(() => {});
      }

      if (isRunning) {
        stopTimer(false);
      } else {
        startTimer();
      }
    }

    function resetTimer() {
      stopTimer(true);
      setInitialTime();
    }

    minutesInput.addEventListener("input", () => {
      if (!isRunning) setInitialTime();
    });

    secondsInput.addEventListener("input", () => {
      if (!isRunning) setInitialTime();
    });

    toggleBtn.addEventListener("click", toggleTimer);
    resetBtn.addEventListener("click", resetTimer);

    // inicia com 5 minutos configurados
    setInitialTime();
  </script>
</body>
</html>
